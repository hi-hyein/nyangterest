# Travis CI 도전!

## 이유 
포트폴리오 작업을 끝내고나서 build된 후 별도의 산출물들을 포트폴리오 저장소에 올려야했다. 그런데 생각해보니 산출 전 작업물, 개발환경들도 소스관리가 되어야하는데 포트폴리오 저장소는 제외였다. 따라서 다른 저장소에서 관리되어야했다. 포트폴리오는 개발소스, build후 산출물 소스 이렇게 두 저장소에서 관리가 필요했다.

처음에는 로컬에서 build된 산출물을 직접 산출물 저장소에 복붙해서 옮겼다. 처음 한두번은 이렇게 하면 되겠지~! 했는데 수정이 많아지고 `build > 산출물 복사 > 폴더찾기 > 붙여넣기 > 커밋 > 푸시`가 반복되다보니 이건 머리가 나쁘면 몸이 고생하는 대표적인 예 같았다.
얼마전 책인가 인터넷 포스트에선가 개발자는 반복적인 행동을 하지 않게 하는 사람이라는 글을 보고 인상깊었는데... 그 문구가 딱 떠오르면서 개발자스럽게 해결하자! 라고 생각하고 이 반복적인 행동을 끝낼 방법을 찾게되었다.

## 하고싶은 것
원하는 목표를 정리하자면 개발저장소에서 작업물들이 `build`>`커밋`>`푸시` 되고 난 후 build된 산출물들만 자동으로 산출물 저장소에 올려지는 것이다.

## 지속적인 통합(CI)
jekyll 템플릿을 사용했기 때문에 공식 사이트에서 build관련하여 찾아본 결과 `Travis Ci`, `Circle Ci`, `Buddy`가 있었다.

빌드테스트와 배포작업을 자동화 해주는 것이 지속적인 통합, `CI`이며
tarvic, circle, buddy는 github과 연동시켜 지속적인 통합을 도와주는 역할을 한다.

나는 무료이면서 많이 사용되고 있는 `Travis Ci`를 사용하기로 했다.

`Travis Ci`는 Github과 연동하여 Commit/Push를 기반으로 CI가 자동 동작하며, Push 외에도 Pull Request에도 반응하도록 설계되어 있다. Heroku와 연동하여 바로 배포(Deployment)를 할 수도 있고 Slack과 메일 등을 통해 통합/배포 결과를 알림으로 받을 수도 있다.

구글링해서 따라하면 쉽게 되겠지..! 라고 생각했지만 오산이었다.
같은 개발환경이 아니니 당연히 변수가 생겼다.

일단 Travis에 가입해서 github과 사용될 저장소를 연동시켜 주었다.
`_config.yml`에 travis ci를 위한 변수를 설정해주고
`.travis.yml`파일을 추가해서 빌드환경을 설정해 주었다.
`travis ci`는`.travis.yml`에 설정된 스크립트를를 보고 빌드를 실행한다.
`RakeFile`을 사용하기 때문에 `Gemfile`에는 rake를 추가해주었다.
(Rake가 너무 생소했다. 공부하면 할수록 새로운게 자꾸 나온다.)

셋팅 후 커밋,푸시를 하면 자동으로 Travis에서 저장소의 액션을 감지하고 Trigger를 실행하고 설정해주었던 `.travis.yml`를 참고해서 빌드를 진행한다.

실시간으로 빌드되는 과정을 tratis 사이트에서 cmd창과 똑같이 보여주는데 새로운 컴퓨터 공간에서 내 저장소를 받아 build하는 것과 똑같다고 생각하면 될 것 같다.
빌드가 성공했는지 실패했는지도 오류메시지에 자세히 알려준다.

내가 하고자했던 자동화 계획은 커밋 푸시 후 트레비스에서 감지하여 저장소를 받고 build하는 것까지 성공하였다. build가 성공해도 아무 반응이 없다.ㅋㅋㅋㅋㅋㅋ 남은 과제는 빌드 후 산출물만 올리는 저장소로 넘기는 작업이다...

## 느낀점
한번에 성공하지는 못했지만 직접 사용하고 눈으로 확인한것만으로 충분한 경험이었다고 생각한다.(정신승리) 멘토링시간에 CI/CD 그리고 깃헙의 Action에 대해서 들은 적 있는데, 막연히 생각만 한것과 실제 경험한 것과는 정말 다르다는걸 느꼈다.(당연하지만)

그리고 무언가 행동이 반복되는게 이상하다고 느낄 수 있는 자세가 굉장이 중요하다고 느껴졌다. 만약 내가 복붙의 반복이 이상하다고 느끼지 못했다면 CI는 기억의 저편으로 묻혀졌을것이다. 또한 그 반복되는 행동을 축소하려고 실천하는 행동이 더해지면서 공부의 효율성과 경험의 가치가 더 높아지는 것 같다.


